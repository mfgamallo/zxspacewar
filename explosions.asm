;;; explosions.asm
;;; Regarding what happens when a rocket is hit

;;; Reset the explosion counters
exps_reset:
	ld	a,(exp_rocket1_sprite_count)
	inc	a
	ld	(exp_rocket1_sprite_count),a
	ld	a,(exp_rocket2_sprite_count)
	inc	a
	ld	(exp_rocket2_sprite_count),a
	ret
	
;;; Check if any of the rockets is hit and paint explosions if they are.
exps_paint:
	ld	a,(rocket1_rktsts) 	; check if rocket1 is hit
	and	1			; select bit0
	jp	z,espr1n		; if hit, paint explosion
	ld	a,(rocket1_posx+1)
	ld	h,a
	ld	a,(rocket1_posy+1)
	ld	l,a
	call	exp_paint
espr1n:	ld	a,(rocket2_rktsts) 	; check if rocket2 is hit
	and	1			; select bit0
	jp	z,espend		; if hit, paint explosion
	ld	a,(rocket2_posx+1)
	ld	h,a
	ld	a,(rocket2_posy+1)
	ld	l,a
	call	exp_paint
espend:	ret
exp_rocket1_sprite_count:	db	$00
exp_rocket2_sprite_count:	db	$00

;;; Paint an explosion sprite
;;; HL contains the X and Y coordinates of the explosion
;;; A contains which of the possible 4 explosion sprites to paint
exp_paint:
	ld	d,h
	ld	e,l
	ld	hl,sprite_explosion
	call	paint_xy_sprite
	ret

sprite_explosion:
	db	%10000001, %00000000, %00000000
	db	%01000001, %10000000, %00000000
	db	%01110011, %10000100, %00000000
	db	%01111111, %11011000, %00000000
	db	%01111111, %11111000, %00000000
	db	%00111111, %11110000, %00000000
	db	%00111111, %11111000, %00000000
	db	%00011111, %11111100, %00000000
	db	%00111111, %11111000, %00000000
	db	%00011111, %11110000, %00000000
	db	%00011111, %11111000, %00000000
	db	%00001111, %11111000, %00000000
	db	%00001111, %11111100, %00000000
	db	%00010011, %11100110, %00000000
	db	%00000001, %11000001, %00000000
	db	%00000000, %10000000, %00000000

	db	%01000000, %10000000, %00000000
	db	%00100000, %11000000, %00000000
	db	%00111001, %11000010, %00000000
	db	%00111111, %11101100, %00000000
	db	%00111111, %11111100, %00000000
	db	%00011111, %11111000, %00000000
	db	%00011111, %11111100, %00000000
	db	%00001111, %11111110, %00000000
	db	%00011111, %11111100, %00000000
	db	%00001111, %11111000, %00000000
	db	%00001111, %11111100, %00000000
	db	%00000111, %11111100, %00000000
	db	%00000111, %11111110, %00000000
	db	%00001001, %11110011, %00000000
	db	%00000000, %11100000, %10000000
	db	%00000000, %01000000, %00000000

	db	%00100000, %01000000, %00000000
	db	%00010000, %01100000, %00000000
	db	%00011100, %11100001, %00000000
	db	%00011111, %11110110, %00000000
	db	%00011111, %11111110, %00000000
	db	%00001111, %11111100, %00000000
	db	%00001111, %11111110, %00000000
	db	%00000111, %11111111, %00000000
	db	%00001111, %11111110, %00000000
	db	%00000111, %11111100, %00000000
	db	%00000111, %11111110, %00000000
	db	%00000011, %11111110, %00000000
	db	%00000011, %11111111, %00000000
	db	%00000100, %11111001, %10000000
	db	%00000000, %01110000, %01000000
	db	%00000000, %00100000, %00000000

	db	%00010000, %00100000, %00000000
	db	%00001000, %00110000, %00000000
	db	%00001110, %01110000, %10000000
	db	%00001111, %11111011, %00000000
	db	%00001111, %11111111, %00000000
	db	%00000111, %11111110, %00000000
	db	%00000111, %11111111, %00000000
	db	%00000011, %11111111, %10000000
	db	%00000111, %11111111, %00000000
	db	%00000011, %11111110, %00000000
	db	%00000011, %11111111, %00000000
	db	%00000001, %11111111, %00000000
	db	%00000001, %11111111, %10000000
	db	%00000010, %01111100, %11000000
	db	%00000000, %00111000, %00100000
	db	%00000000, %00010000, %00000000

	db	%00001000, %00010000, %00000000
	db	%00000100, %00011000, %00000000
	db	%00000111, %00111000, %01000000
	db	%00000111, %11111101, %10000000
	db	%00000111, %11111111, %10000000
	db	%00000011, %11111111, %00000000
	db	%00000011, %11111111, %10000000
	db	%00000001, %11111111, %11000000
	db	%00000011, %11111111, %10000000
	db	%00000001, %11111111, %00000000
	db	%00000001, %11111111, %10000000
	db	%00000000, %11111111, %10000000
	db	%00000000, %11111111, %11000000
	db	%00000001, %00111110, %01100000
	db	%00000000, %00011100, %00010000
	db	%00000000, %00001000, %00000000

	db	%00000100, %00001000, %00000000
	db	%00000010, %00001100, %00000000
	db	%00000011, %10011100, %00100000
	db	%00000011, %11111110, %11000000
	db	%00000011, %11111111, %11000000
	db	%00000001, %11111111, %10000000
	db	%00000001, %11111111, %11000000
	db	%00000000, %11111111, %11100000
	db	%00000001, %11111111, %11000000
	db	%00000000, %11111111, %10000000
	db	%00000000, %11111111, %11000000
	db	%00000000, %01111111, %11000000
	db	%00000000, %01111111, %11100000
	db	%00000000, %10011111, %00110000
	db	%00000000, %00001110, %00001000
	db	%00000000, %00000100, %00000000

	db	%00000010, %00000100, %00000000
	db	%00000001, %00000110, %00000000
	db	%00000001, %11001110, %00010000
	db	%00000001, %11111111, %01100000
	db	%00000001, %11111111, %11100000
	db	%00000000, %11111111, %11000000
	db	%00000000, %11111111, %11100000
	db	%00000000, %01111111, %11110000
	db	%00000000, %11111111, %11100000
	db	%00000000, %01111111, %11000000
	db	%00000000, %01111111, %11100000
	db	%00000000, %00111111, %11100000
	db	%00000000, %00111111, %11110000
	db	%00000000, %01001111, %10011000
	db	%00000000, %00000111, %00000100
	db	%00000000, %00000010, %00000000

	db	%00000001, %00000010, %00000000
	db	%00000000, %10000011, %00000000
	db	%00000000, %11100111, %00001000
	db	%00000000, %11111111, %10110000
	db	%00000000, %11111111, %11110000
	db	%00000000, %01111111, %11100000
	db	%00000000, %01111111, %11110000
	db	%00000000, %00111111, %11111000
	db	%00000000, %01111111, %11110000
	db	%00000000, %00111111, %11100000
	db	%00000000, %00111111, %11110000
	db	%00000000, %00011111, %11110000
	db	%00000000, %00011111, %11111000
	db	%00000000, %00100111, %11001100
	db	%00000000, %00000011, %10000010
	db	%00000000, %00000001, %00000000
